<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Creating Exposure Intervals • expstudies</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Creating Exposure Intervals">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">expstudies</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/creating_exposures.html">Creating Exposure Intervals</a>
    </li>
    <li>
      <a href="../articles/premium_pattern.html">Premium Pattern</a>
    </li>
    <li>
      <a href="../articles/rate_calculations.html">Mortality/Lapse Rate Calculations</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Creating Exposure Intervals</h1>
            
      
      
      <div class="hidden name"><code>creating_exposures.Rmd</code></div>

    </div>

    
    
<p>Synthetic data called “records” is included in the package. To make an exposure frame the data must have “key”, “start”, and “end” columns with unique values in the key column.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">expstudies<span class="op">::</span>records</code></pre></div>
<table class="table">
<colgroup>
<col width="15%">
<col width="18%">
<col width="18%">
<col width="16%">
<col width="11%">
</colgroup>
<thead><tr class="header">
<th align="center">key</th>
<th align="center">start</th>
<th align="center">end</th>
<th align="center">issue_age</th>
<th align="center">gender</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">B10251C8</td>
<td align="center">2010-04-10</td>
<td align="center">2019-04-04</td>
<td align="center">35</td>
<td align="center">M</td>
</tr>
<tr class="even">
<td align="center">D68554D5</td>
<td align="center">2005-01-01</td>
<td align="center">2019-04-04</td>
<td align="center">30</td>
<td align="center">F</td>
</tr>
</tbody>
</table>
<p>The addExposures function creates rows representing exposures between the start and end date with calculated exposures. By default exposure rows are created for each policy year.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">exposures &lt;-<span class="st"> </span><span class="kw"><a href="../reference/addExposures.html">addExposures</a></span>(records)
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(exposures)</code></pre></div>
<table class="table">
<colgroup>
<col width="15%">
<col width="15%">
<col width="18%">
<col width="18%">
<col width="13%">
</colgroup>
<thead><tr class="header">
<th align="center">key</th>
<th align="center">duration</th>
<th align="center">start_int</th>
<th align="center">end_int</th>
<th align="center">exposure</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">B10251C8</td>
<td align="center">1</td>
<td align="center">2010-04-10</td>
<td align="center">2011-04-09</td>
<td align="center">0.9993</td>
</tr>
<tr class="even">
<td align="center">B10251C8</td>
<td align="center">2</td>
<td align="center">2011-04-10</td>
<td align="center">2012-04-09</td>
<td align="center">1.002</td>
</tr>
<tr class="odd">
<td align="center">B10251C8</td>
<td align="center">3</td>
<td align="center">2012-04-10</td>
<td align="center">2013-04-09</td>
<td align="center">0.9993</td>
</tr>
<tr class="even">
<td align="center">B10251C8</td>
<td align="center">4</td>
<td align="center">2013-04-10</td>
<td align="center">2014-04-09</td>
<td align="center">0.9993</td>
</tr>
<tr class="odd">
<td align="center">B10251C8</td>
<td align="center">5</td>
<td align="center">2014-04-10</td>
<td align="center">2015-04-09</td>
<td align="center">0.9993</td>
</tr>
<tr class="even">
<td align="center">B10251C8</td>
<td align="center">6</td>
<td align="center">2015-04-10</td>
<td align="center">2016-04-09</td>
<td align="center">1.002</td>
</tr>
</tbody>
</table>
<p>One exposure unit is 365.25 days so the exposure column will be either slightly above or below 1. Giving days different weights depending on if they are in a leap year or not yields higher mortality rates for leap years when mortality is constant which is not desirable.</p>
<div id="addexposures-arguments" class="section level3">
<h3 class="hasAnchor">
<a href="#addexposures-arguments" class="anchor"></a>addExposures() arguments</h3>
<div id="type" class="section level4">
<h4 class="hasAnchor">
<a href="#type" class="anchor"></a>type</h4>
<p>There are several options available for exposure calculations. For example, we can create exposure rows by policy month.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">exposures_PM &lt;-<span class="st"> </span><span class="kw"><a href="../reference/addExposures.html">addExposures</a></span>(records, <span class="dt">type =</span> <span class="st">"PM"</span>)
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(exposures_PM)</code></pre></div>
<table class="table">
<colgroup>
<col width="15%">
<col width="15%">
<col width="20%">
<col width="17%">
<col width="17%">
<col width="13%">
</colgroup>
<thead><tr class="header">
<th align="center">key</th>
<th align="center">duration</th>
<th align="center">policy_month</th>
<th align="center">start_int</th>
<th align="center">end_int</th>
<th align="center">exposure</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">B10251C8</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">2010-04-10</td>
<td align="center">2010-05-09</td>
<td align="center">0.08214</td>
</tr>
<tr class="even">
<td align="center">B10251C8</td>
<td align="center">1</td>
<td align="center">2</td>
<td align="center">2010-05-10</td>
<td align="center">2010-06-09</td>
<td align="center">0.08487</td>
</tr>
<tr class="odd">
<td align="center">B10251C8</td>
<td align="center">1</td>
<td align="center">3</td>
<td align="center">2010-06-10</td>
<td align="center">2010-07-09</td>
<td align="center">0.08214</td>
</tr>
<tr class="even">
<td align="center">B10251C8</td>
<td align="center">1</td>
<td align="center">4</td>
<td align="center">2010-07-10</td>
<td align="center">2010-08-09</td>
<td align="center">0.08487</td>
</tr>
<tr class="odd">
<td align="center">B10251C8</td>
<td align="center">1</td>
<td align="center">5</td>
<td align="center">2010-08-10</td>
<td align="center">2010-09-09</td>
<td align="center">0.08487</td>
</tr>
<tr class="even">
<td align="center">B10251C8</td>
<td align="center">1</td>
<td align="center">6</td>
<td align="center">2010-09-10</td>
<td align="center">2010-10-09</td>
<td align="center">0.08214</td>
</tr>
</tbody>
</table>
<p>The policy year and policy month options only do policy anniversary studies because exposure intervals may cross calendar years. There are options for creating exposure rows that do not cross calendar years or calendar months to allow for calendar year or calendar month studies.</p>
<p>Policy year with calendar year:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">exposures_PYCY &lt;-<span class="st"> </span><span class="kw"><a href="../reference/addExposures.html">addExposures</a></span>(records, <span class="dt">type =</span> <span class="st">"PYCY"</span>)
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(exposures_PYCY)</code></pre></div>
<table class="table">
<colgroup>
<col width="15%">
<col width="15%">
<col width="18%">
<col width="18%">
<col width="13%">
</colgroup>
<thead><tr class="header">
<th align="center">key</th>
<th align="center">duration</th>
<th align="center">start_int</th>
<th align="center">end_int</th>
<th align="center">exposure</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">B10251C8</td>
<td align="center">1</td>
<td align="center">2010-04-10</td>
<td align="center">2010-12-31</td>
<td align="center">0.7283</td>
</tr>
<tr class="even">
<td align="center">B10251C8</td>
<td align="center">1</td>
<td align="center">2011-01-01</td>
<td align="center">2011-04-09</td>
<td align="center">0.271</td>
</tr>
<tr class="odd">
<td align="center">B10251C8</td>
<td align="center">2</td>
<td align="center">2011-04-10</td>
<td align="center">2011-12-31</td>
<td align="center">0.7283</td>
</tr>
<tr class="even">
<td align="center">B10251C8</td>
<td align="center">2</td>
<td align="center">2012-01-01</td>
<td align="center">2012-04-09</td>
<td align="center">0.2738</td>
</tr>
<tr class="odd">
<td align="center">B10251C8</td>
<td align="center">3</td>
<td align="center">2012-04-10</td>
<td align="center">2012-12-31</td>
<td align="center">0.7283</td>
</tr>
<tr class="even">
<td align="center">B10251C8</td>
<td align="center">3</td>
<td align="center">2013-01-01</td>
<td align="center">2013-04-09</td>
<td align="center">0.271</td>
</tr>
</tbody>
</table>
<p>Policy year with calendar month:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">exposures_PYCM &lt;-<span class="st"> </span><span class="kw"><a href="../reference/addExposures.html">addExposures</a></span>(records, <span class="dt">type =</span> <span class="st">"PYCM"</span>)
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(exposures_PYCM, <span class="dt">n =</span> <span class="dv">15</span>)</code></pre></div>
<table class="table">
<colgroup>
<col width="15%">
<col width="15%">
<col width="18%">
<col width="18%">
<col width="13%">
</colgroup>
<thead><tr class="header">
<th align="center">key</th>
<th align="center">duration</th>
<th align="center">start_int</th>
<th align="center">end_int</th>
<th align="center">exposure</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">B10251C8</td>
<td align="center">1</td>
<td align="center">2010-04-10</td>
<td align="center">2010-04-30</td>
<td align="center">0.05749</td>
</tr>
<tr class="even">
<td align="center">B10251C8</td>
<td align="center">1</td>
<td align="center">2010-05-01</td>
<td align="center">2010-05-31</td>
<td align="center">0.08487</td>
</tr>
<tr class="odd">
<td align="center">B10251C8</td>
<td align="center">1</td>
<td align="center">2010-06-01</td>
<td align="center">2010-06-30</td>
<td align="center">0.08214</td>
</tr>
<tr class="even">
<td align="center">B10251C8</td>
<td align="center">1</td>
<td align="center">2010-07-01</td>
<td align="center">2010-07-31</td>
<td align="center">0.08487</td>
</tr>
<tr class="odd">
<td align="center">B10251C8</td>
<td align="center">1</td>
<td align="center">2010-08-01</td>
<td align="center">2010-08-31</td>
<td align="center">0.08487</td>
</tr>
<tr class="even">
<td align="center">B10251C8</td>
<td align="center">1</td>
<td align="center">2010-09-01</td>
<td align="center">2010-09-30</td>
<td align="center">0.08214</td>
</tr>
<tr class="odd">
<td align="center">B10251C8</td>
<td align="center">1</td>
<td align="center">2010-10-01</td>
<td align="center">2010-10-31</td>
<td align="center">0.08487</td>
</tr>
<tr class="even">
<td align="center">B10251C8</td>
<td align="center">1</td>
<td align="center">2010-11-01</td>
<td align="center">2010-11-30</td>
<td align="center">0.08214</td>
</tr>
<tr class="odd">
<td align="center">B10251C8</td>
<td align="center">1</td>
<td align="center">2010-12-01</td>
<td align="center">2010-12-31</td>
<td align="center">0.08487</td>
</tr>
<tr class="even">
<td align="center">B10251C8</td>
<td align="center">1</td>
<td align="center">2011-01-01</td>
<td align="center">2011-01-31</td>
<td align="center">0.08487</td>
</tr>
<tr class="odd">
<td align="center">B10251C8</td>
<td align="center">1</td>
<td align="center">2011-02-01</td>
<td align="center">2011-02-28</td>
<td align="center">0.07666</td>
</tr>
<tr class="even">
<td align="center">B10251C8</td>
<td align="center">1</td>
<td align="center">2011-03-01</td>
<td align="center">2011-03-31</td>
<td align="center">0.08487</td>
</tr>
<tr class="odd">
<td align="center">B10251C8</td>
<td align="center">1</td>
<td align="center">2011-04-01</td>
<td align="center">2011-04-09</td>
<td align="center">0.02464</td>
</tr>
<tr class="even">
<td align="center">B10251C8</td>
<td align="center">2</td>
<td align="center">2011-04-10</td>
<td align="center">2011-04-30</td>
<td align="center">0.05749</td>
</tr>
<tr class="odd">
<td align="center">B10251C8</td>
<td align="center">2</td>
<td align="center">2011-05-01</td>
<td align="center">2011-05-31</td>
<td align="center">0.08487</td>
</tr>
</tbody>
</table>
<p>Policy month with calendar year:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">exposures_PYCM &lt;-<span class="st"> </span><span class="kw"><a href="../reference/addExposures.html">addExposures</a></span>(records, <span class="dt">type =</span> <span class="st">"PMCY"</span>)
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(exposures_PYCM, <span class="dt">n =</span> <span class="dv">11</span>)</code></pre></div>
<table class="table">
<colgroup>
<col width="15%">
<col width="15%">
<col width="20%">
<col width="17%">
<col width="17%">
<col width="13%">
</colgroup>
<thead><tr class="header">
<th align="center">key</th>
<th align="center">duration</th>
<th align="center">policy_month</th>
<th align="center">start_int</th>
<th align="center">end_int</th>
<th align="center">exposure</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">B10251C8</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">2010-04-10</td>
<td align="center">2010-05-09</td>
<td align="center">0.08214</td>
</tr>
<tr class="even">
<td align="center">B10251C8</td>
<td align="center">1</td>
<td align="center">2</td>
<td align="center">2010-05-10</td>
<td align="center">2010-06-09</td>
<td align="center">0.08487</td>
</tr>
<tr class="odd">
<td align="center">B10251C8</td>
<td align="center">1</td>
<td align="center">3</td>
<td align="center">2010-06-10</td>
<td align="center">2010-07-09</td>
<td align="center">0.08214</td>
</tr>
<tr class="even">
<td align="center">B10251C8</td>
<td align="center">1</td>
<td align="center">4</td>
<td align="center">2010-07-10</td>
<td align="center">2010-08-09</td>
<td align="center">0.08487</td>
</tr>
<tr class="odd">
<td align="center">B10251C8</td>
<td align="center">1</td>
<td align="center">5</td>
<td align="center">2010-08-10</td>
<td align="center">2010-09-09</td>
<td align="center">0.08487</td>
</tr>
<tr class="even">
<td align="center">B10251C8</td>
<td align="center">1</td>
<td align="center">6</td>
<td align="center">2010-09-10</td>
<td align="center">2010-10-09</td>
<td align="center">0.08214</td>
</tr>
<tr class="odd">
<td align="center">B10251C8</td>
<td align="center">1</td>
<td align="center">7</td>
<td align="center">2010-10-10</td>
<td align="center">2010-11-09</td>
<td align="center">0.08487</td>
</tr>
<tr class="even">
<td align="center">B10251C8</td>
<td align="center">1</td>
<td align="center">8</td>
<td align="center">2010-11-10</td>
<td align="center">2010-12-09</td>
<td align="center">0.08214</td>
</tr>
<tr class="odd">
<td align="center">B10251C8</td>
<td align="center">1</td>
<td align="center">9</td>
<td align="center">2010-12-10</td>
<td align="center">2010-12-31</td>
<td align="center">0.06023</td>
</tr>
<tr class="even">
<td align="center">B10251C8</td>
<td align="center">1</td>
<td align="center">9</td>
<td align="center">2011-01-01</td>
<td align="center">2011-01-09</td>
<td align="center">0.02464</td>
</tr>
<tr class="odd">
<td align="center">B10251C8</td>
<td align="center">1</td>
<td align="center">10</td>
<td align="center">2011-01-10</td>
<td align="center">2011-02-09</td>
<td align="center">0.08487</td>
</tr>
</tbody>
</table>
<p>Policy month with calendar month:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">exposures_PMCM &lt;-<span class="st"> </span><span class="kw"><a href="../reference/addExposures.html">addExposures</a></span>(records, <span class="dt">type =</span> <span class="st">"PMCM"</span>)
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(exposures_PMCM)</code></pre></div>
<table class="table">
<colgroup>
<col width="15%">
<col width="15%">
<col width="20%">
<col width="17%">
<col width="17%">
<col width="13%">
</colgroup>
<thead><tr class="header">
<th align="center">key</th>
<th align="center">duration</th>
<th align="center">policy_month</th>
<th align="center">start_int</th>
<th align="center">end_int</th>
<th align="center">exposure</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">B10251C8</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">2010-04-10</td>
<td align="center">2010-04-30</td>
<td align="center">0.05749</td>
</tr>
<tr class="even">
<td align="center">B10251C8</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">2010-05-01</td>
<td align="center">2010-05-09</td>
<td align="center">0.02464</td>
</tr>
<tr class="odd">
<td align="center">B10251C8</td>
<td align="center">1</td>
<td align="center">2</td>
<td align="center">2010-05-10</td>
<td align="center">2010-05-31</td>
<td align="center">0.06023</td>
</tr>
<tr class="even">
<td align="center">B10251C8</td>
<td align="center">1</td>
<td align="center">2</td>
<td align="center">2010-06-01</td>
<td align="center">2010-06-09</td>
<td align="center">0.02464</td>
</tr>
<tr class="odd">
<td align="center">B10251C8</td>
<td align="center">1</td>
<td align="center">3</td>
<td align="center">2010-06-10</td>
<td align="center">2010-06-30</td>
<td align="center">0.05749</td>
</tr>
<tr class="even">
<td align="center">B10251C8</td>
<td align="center">1</td>
<td align="center">3</td>
<td align="center">2010-07-01</td>
<td align="center">2010-07-09</td>
<td align="center">0.02464</td>
</tr>
</tbody>
</table>
</div>
<div id="lower_year-and-upper_year" class="section level4">
<h4 class="hasAnchor">
<a href="#lower_year-and-upper_year" class="anchor"></a>lower_year and upper_year</h4>
<p>There are arguments in the addExposures function that allow for truncation by calendar year. Exposure rows will only be created if the interval lies entirely within the specified years. This can reduce computation time and memory use.</p>
<p>Policy year with lower and upper truncation year:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">exposures_PY_2016_to_<span class="dv">2018</span> &lt;-<span class="st"> </span><span class="kw"><a href="../reference/addExposures.html">addExposures</a></span>(records, <span class="dt">type =</span> <span class="st">"PY"</span>, <span class="dt">lower_year =</span> <span class="dv">2016</span>, <span class="dt">upper_year =</span> <span class="dv">2018</span>)
exposures_PY_2016_to_<span class="dv">2018</span></code></pre></div>
<table class="table">
<colgroup>
<col width="15%">
<col width="15%">
<col width="18%">
<col width="18%">
<col width="13%">
</colgroup>
<thead><tr class="header">
<th align="center">key</th>
<th align="center">duration</th>
<th align="center">start_int</th>
<th align="center">end_int</th>
<th align="center">exposure</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">B10251C8</td>
<td align="center">7</td>
<td align="center">2016-04-10</td>
<td align="center">2017-04-09</td>
<td align="center">0.9993</td>
</tr>
<tr class="even">
<td align="center">B10251C8</td>
<td align="center">8</td>
<td align="center">2017-04-10</td>
<td align="center">2018-04-04</td>
<td align="center">0.9856</td>
</tr>
<tr class="odd">
<td align="center">D68554D5</td>
<td align="center">12</td>
<td align="center">2016-01-01</td>
<td align="center">2016-12-31</td>
<td align="center">1.002</td>
</tr>
<tr class="even">
<td align="center">D68554D5</td>
<td align="center">13</td>
<td align="center">2017-01-01</td>
<td align="center">2017-12-31</td>
<td align="center">0.9993</td>
</tr>
<tr class="odd">
<td align="center">D68554D5</td>
<td align="center">14</td>
<td align="center">2018-01-01</td>
<td align="center">2018-04-04</td>
<td align="center">0.2574</td>
</tr>
</tbody>
</table>
<p>Policy year with calendar month and lower truncation year:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">exposures_PYCM_<span class="dv">2019</span> &lt;-<span class="st"> </span><span class="kw"><a href="../reference/addExposures.html">addExposures</a></span>(records, <span class="dt">type =</span> <span class="st">"PYCM"</span>, <span class="dt">lower_year =</span> <span class="dv">2019</span>)
exposures_PYCM_<span class="dv">2019</span></code></pre></div>
<table class="table">
<colgroup>
<col width="15%">
<col width="15%">
<col width="18%">
<col width="18%">
<col width="13%">
</colgroup>
<thead><tr class="header">
<th align="center">key</th>
<th align="center">duration</th>
<th align="center">start_int</th>
<th align="center">end_int</th>
<th align="center">exposure</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">B10251C8</td>
<td align="center">9</td>
<td align="center">2019-01-01</td>
<td align="center">2019-01-31</td>
<td align="center">0.08487</td>
</tr>
<tr class="even">
<td align="center">B10251C8</td>
<td align="center">9</td>
<td align="center">2019-02-01</td>
<td align="center">2019-02-28</td>
<td align="center">0.07666</td>
</tr>
<tr class="odd">
<td align="center">B10251C8</td>
<td align="center">9</td>
<td align="center">2019-03-01</td>
<td align="center">2019-03-31</td>
<td align="center">0.08487</td>
</tr>
<tr class="even">
<td align="center">B10251C8</td>
<td align="center">9</td>
<td align="center">2019-04-01</td>
<td align="center">2019-04-04</td>
<td align="center">0.01095</td>
</tr>
<tr class="odd">
<td align="center">D68554D5</td>
<td align="center">15</td>
<td align="center">2019-01-01</td>
<td align="center">2019-01-31</td>
<td align="center">0.08487</td>
</tr>
<tr class="even">
<td align="center">D68554D5</td>
<td align="center">15</td>
<td align="center">2019-02-01</td>
<td align="center">2019-02-28</td>
<td align="center">0.07666</td>
</tr>
<tr class="odd">
<td align="center">D68554D5</td>
<td align="center">15</td>
<td align="center">2019-03-01</td>
<td align="center">2019-03-31</td>
<td align="center">0.08487</td>
</tr>
<tr class="even">
<td align="center">D68554D5</td>
<td align="center">15</td>
<td align="center">2019-04-01</td>
<td align="center">2019-04-04</td>
<td align="center">0.01095</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="determine-output-size-before-calling-addexposures" class="section level3">
<h3 class="hasAnchor">
<a href="#determine-output-size-before-calling-addexposures" class="anchor"></a>Determine Output Size Before Calling addExposures()</h3>
<p>We can estimate the size of a call to addExposures() by using expSize(). We shouldn’t try to create 100 million rows, so we can use this function to make sure we don’t.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/expSize.html">expSize</a></span>(records, <span class="dt">type =</span> <span class="st">"PY"</span>)</code></pre></div>
<pre><code>## row_bound 
##        25</code></pre>
<p>expSize() takes the same arguments as addExposures().</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/expSize.html">expSize</a></span>(records, <span class="dt">type =</span> <span class="st">"PMCM"</span>, <span class="dt">lower_year =</span> <span class="dv">2015</span>, <span class="dt">upper_year =</span> <span class="dv">2017</span>)</code></pre></div>
<pre><code>## row_bound 
##       192</code></pre>
</div>
<div id="adding-additional-information-to-the-calculated-exposures" class="section level3">
<h3 class="hasAnchor">
<a href="#adding-additional-information-to-the-calculated-exposures" class="anchor"></a>Adding additional information to the calculated exposures</h3>
<p>We can add additional information by joining our original records to the created exposures by the key. Below we join the gender and issue age from our original record to the exposure frame and calculate the attained age.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">exposures_mod &lt;-<span class="st"> </span>exposures <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">inner_join</span>(<span class="kw">select</span>(records, key, issue_age, gender), <span class="dt">by =</span> <span class="st">"key"</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">attained_age =</span> issue_age <span class="op">+</span><span class="st"> </span>duration <span class="op">-</span><span class="st"> </span><span class="dv">1</span>)
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(exposures_mod)</code></pre></div>
<table class="table">
<colgroup>
<col width="11%">
<col width="11%">
<col width="13%">
<col width="13%">
<col width="11%">
<col width="12%">
<col width="9%">
<col width="14%">
</colgroup>
<thead><tr class="header">
<th align="center">key</th>
<th align="center">duration</th>
<th align="center">start_int</th>
<th align="center">end_int</th>
<th align="center">exposure</th>
<th align="center">issue_age</th>
<th align="center">gender</th>
<th align="center">attained_age</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">B10251C8</td>
<td align="center">1</td>
<td align="center">2010-04-10</td>
<td align="center">2011-04-09</td>
<td align="center">0.9993</td>
<td align="center">35</td>
<td align="center">M</td>
<td align="center">35</td>
</tr>
<tr class="even">
<td align="center">B10251C8</td>
<td align="center">2</td>
<td align="center">2011-04-10</td>
<td align="center">2012-04-09</td>
<td align="center">1.002</td>
<td align="center">35</td>
<td align="center">M</td>
<td align="center">36</td>
</tr>
<tr class="odd">
<td align="center">B10251C8</td>
<td align="center">3</td>
<td align="center">2012-04-10</td>
<td align="center">2013-04-09</td>
<td align="center">0.9993</td>
<td align="center">35</td>
<td align="center">M</td>
<td align="center">37</td>
</tr>
<tr class="even">
<td align="center">B10251C8</td>
<td align="center">4</td>
<td align="center">2013-04-10</td>
<td align="center">2014-04-09</td>
<td align="center">0.9993</td>
<td align="center">35</td>
<td align="center">M</td>
<td align="center">38</td>
</tr>
<tr class="odd">
<td align="center">B10251C8</td>
<td align="center">5</td>
<td align="center">2014-04-10</td>
<td align="center">2015-04-09</td>
<td align="center">0.9993</td>
<td align="center">35</td>
<td align="center">M</td>
<td align="center">39</td>
</tr>
<tr class="even">
<td align="center">B10251C8</td>
<td align="center">6</td>
<td align="center">2015-04-10</td>
<td align="center">2016-04-09</td>
<td align="center">1.002</td>
<td align="center">35</td>
<td align="center">M</td>
<td align="center">40</td>
</tr>
</tbody>
</table>
</div>
<div id="making-daily-exposures" class="section level3">
<h3 class="hasAnchor">
<a href="#making-daily-exposures" class="anchor"></a>Making Daily Exposures</h3>
<p>You can create a row for each policy day in an interval using the addDays() function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(<span class="kw"><a href="../reference/addDays.html">addDays</a></span>(records))</code></pre></div>
<table class="table">
<colgroup>
<col width="15%">
<col width="16%">
</colgroup>
<thead><tr class="header">
<th align="center">key</th>
<th align="center">date</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">B10251C8</td>
<td align="center">2010-04-10</td>
</tr>
<tr class="even">
<td align="center">B10251C8</td>
<td align="center">2010-04-11</td>
</tr>
<tr class="odd">
<td align="center">B10251C8</td>
<td align="center">2010-04-12</td>
</tr>
<tr class="even">
<td align="center">B10251C8</td>
<td align="center">2010-04-13</td>
</tr>
<tr class="odd">
<td align="center">B10251C8</td>
<td align="center">2010-04-14</td>
</tr>
<tr class="even">
<td align="center">B10251C8</td>
<td align="center">2010-04-15</td>
</tr>
</tbody>
</table>
<p>There are options for lower and upper truncation dates</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/addDays.html">addDays</a></span>(records, <span class="dt">min_date =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.Date">as.Date</a></span>(<span class="st">"2018-10-10"</span>), <span class="dt">max_date =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.Date">as.Date</a></span>(<span class="st">"2018-10-12"</span>))</code></pre></div>
<table class="table">
<colgroup>
<col width="15%">
<col width="16%">
</colgroup>
<thead><tr class="header">
<th align="center">key</th>
<th align="center">date</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">B10251C8</td>
<td align="center">2018-10-10</td>
</tr>
<tr class="even">
<td align="center">B10251C8</td>
<td align="center">2018-10-11</td>
</tr>
<tr class="odd">
<td align="center">B10251C8</td>
<td align="center">2018-10-12</td>
</tr>
<tr class="even">
<td align="center">D68554D5</td>
<td align="center">2018-10-10</td>
</tr>
<tr class="odd">
<td align="center">D68554D5</td>
<td align="center">2018-10-11</td>
</tr>
<tr class="even">
<td align="center">D68554D5</td>
<td align="center">2018-10-12</td>
</tr>
</tbody>
</table>
<p>You can determine the size of the ouput without creating the output using the daySize() function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/daySize.html">daySize</a></span>(records, <span class="dt">min_date =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.Date">as.Date</a></span>(<span class="st">"2018-10-10"</span>), <span class="dt">max_date =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.Date">as.Date</a></span>(<span class="st">"2018-10-12"</span>))</code></pre></div>
<pre><code>## num_rows 
##        6</code></pre>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Matthew Caseres.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
